{% extends 'main/layout.html' %}
{% load static %}

{% block title %}Home{% endblock %}

{% block add_css %}
<link rel="stylesheet" href="{% static 'main/CSS/home_page.css' %}">
{% endblock %}

{% block content %}
<body>
    <!-- Search bar -->
    <div class="search-bar-container">
        <form method="GET" action="/shop/page/1/">
            <input type="text" name="search_query" placeholder="Search" class="search-bar">
            <button type="submit" class="search-button">Search</button>
        </form>
    </div>

    <div class="container">
        <!-- Recently viewed products -->
        <div class="list-section">
            <h2>Recently Viewed</h2>
            <div class="product-list">
                {% for view in last_viewed %}
                    <div class="product-card">
                        <a href="/shop/product/{{ view.product.id }}/" class="product-link">
                            <img src="{{ view.image }}" alt="{{ view.product.name }}">
                            <h3>{{ view.product.brand }} {{ view.product.name }}</h3>
                            <p class="price">{{ view.product.price }} $</p>
                        </a>
                        <a href="/shop/order/product/{{ view.product.id }}/" class="add-to-cart-btn">Buy</a>
                    </div>
                {% endfor %}
            </div>
        </div>

        <!-- Recommended products -->
        <div class="list-section">
            <h2>Recommendations</h2>
            <div class="product-list">
                {% for product in recommendations %}
                    <div class="product-card">
                        <a href="/shop/product/{{ product.id }}/" class="product-link">
                            <img src="{{ product.image.url }}" alt="{{ product.name }}">
                            <h3>{{ product.brand }} {{ product.name }}</h3>
                            <p class="price">{{ product.price }} $</p>
                        </a>
                        <a href="/shop/order/product/{{ product.id }}/" class="add-to-cart-btn">Buy</a>
                    </div>
                {% endfor %}
            </div>
        </div>
    </div>
</body>
{% endblock %}